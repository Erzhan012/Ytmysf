```markdown
# Telegram Music Bot (python-telegram-bot + yt-dlp)

Кратко: бот умеет искать музыку (несколько источников через yt-dlp), показывает результаты постранично (10 на страницу), кеширует результаты, скачивает трек в MP3 и отправляет пользователю. При выборе трека панель с результатами не исчезает.

Требования:
- Python 3.10+
- ffmpeg должен быть установлен в системе и доступен в PATH
- Установите зависимости:
  pip install -r requirements.txt

Настройка:
1. Скопируйте `.env.example` в `.env` и заполните BOT_TOKEN и другие переменные, либо экспортируйте их:
   export BOT_TOKEN="123456:ABC-DEF..."
2. (Опционально) ADMIN_ID — id администратора для системных уведомлений.
3. Запустите:
     python main.py

Команды:
- /start — приветственное сообщение
- /search <запрос> — поиск треков
- Отправьте текст — считается поисковым запросом
- Отправьте ссылку — бот извлечёт информацию о треке и предложит скачать

Особенности:
- Комбинированный поиск: uses SEARCH_SOURCES (префиксы yt-dlp)
- Поддержка прямых URL (любой сайт, поддерживаемый yt-dlp)
- Кэш поиска (TTL) — ускоряет повторные запросы
- Пагинация и inline-кнопки: до PAGE_SIZE на странице (по умолчанию 10)
- MP3 конвертация через ffmpeg и yt-dlp postprocessor
- Исходное сообщение с панелью остаётся доступным после отправки аудио

Ограничения:
- Telegram накладывает ограничения на размер отправляемого файла (см. Telegram Bot API docs).
- yt-dlp извлекает из разных источников; поведение зависит от extractors и версии yt-dlp.
- Для продакшена рекомендую:
  - заменить in-memory кеш на Redis/SQLite
  - добавить очередь задач/лимиты на одновременные загрузки
  - настроить логирование и мониторинг

Дальше можно:
- Добавить прогресс загрузки (progress_hook) и отображение прогресса в сообщениях
- Добавить Redis вместо TTLCache
- Dockerize и деплой в сервисе или systemd unit
```
